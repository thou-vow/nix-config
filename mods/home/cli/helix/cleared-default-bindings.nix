let
  normalMode = [
    "'"
    "\""
    "!"
    "A-!"
    "$"
    "%"
    "&"
    "*"
    "A-*"
    "("
    "A-("
    ")"
    "A-)"
    "minus"
    "A-minus"
    "_"
    "A-_"
    "+"
    "q"
    "S-q"
    "w"
    "S-w"
    "e"
    "S-e"
    "A-e"
    "r"
    "S-r"
    "t"
    "S-t"
    "y"
    "S-y"
    "u"
    "S-u"
    "A-u"
    "A-S-u"
    "C-u"
    "i"
    "S-i"
    "A-i"
    "A-S-i"
    "C-i"
    "o"
    "S-o"
    "A-o"
    "C-o"
    "p"
    "S-p"
    "`"
    "A-`"
    "a"
    "S-a"
    "A-a"
    "C-a"
    "s"
    "S-s"
    "A-s"
    "C-s"
    "d"
    "A-d"
    "C-d"
    "f"
    "S-f"
    "C-f"
    "S-g"
    "h"
    "S-h"
    "A-h"
    "j"
    "S-j"
    "A-j"
    "A-S-j"
    "k"
    "S-k"
    "A-k"
    "A-S-k"
    "l"
    "S-l"
    "A-l"
    "~"
    "\\"
    "|"
    "A-|"
    "C-z"
    "x"
    "S-x"
    "A-x"
    "A-S-x"
    "C-x"
    "S-c"
    "A-c"
    "A-S-c"
    "C-c"
    "v"
    "b"
    "S-b"
    "A-b"
    "C-b"
    "n"
    "S-n"
    "A-n"
    ","
    "<"
    "A-,"
    ">"
    "A-."
    ";"
    ":"
    "A-;"
    "A-:"
    "?"
    "ret"
    "A-ret"
    "left"
    "A-left"
    "down"
    "A-down"
    "A-S-down"
    "up"
    "A-up"
    "right"
    "A-right"
    "pageup"
    "pagedown"
    "home"
  ];
  windowMinorMode = [
    "q"
    "C-q"
    "w"
    "C-w"
    "t"
    "C-t"
    "o"
    "C-o"
    "s"
    "C-s"
    "f"
    "S-f"
    "h"
    "S-h"
    "C-h"
    "j"
    "S-j"
    "C-j"
    "k"
    "S-k"
    "C-k"
    "l"
    "S-l"
    "C-l"
    "v"
    "C-v"
    "n"
    "left"
    "right"
    "up"
    "down"
  ];
  gotoMinorMode = [
    "w"
    "e"
    "r"
    "t"
    "y"
    "i"
    "p"
    "a"
    "s"
    "d"
    "S-d"
    "f"
    "g"
    "h"
    "j"
    "k"
    "l"
    "|"
    "c"
    "."
    "b"
    "n"
    "m"
  ];
  impairMinorMode = [
    "e"
    "t"
    "S-t"
    "p"
    "a"
    "d"
    "S-d"
    "f"
    "g"
    "S-g"
    "c"
    "space"
  ];
  viewMinorMode = [
    "t"
    "C-u"
    "C-d"
    "C-f"
    "z"
    "j"
    "k"
    "c"
    "b"
    "C-b"
    "/"
    "?"
    "n"
    "S-n"
    "m"
    "backspace"
    "space"
    "pageup"
    "pagedown"
    "up"
    "down"
  ];
  matchMinorMode = [
    "r"
    "i"
    "a"
    "s"
    "d"
    "m"
  ];
  spaceMinorMode = [
    "'"
    "w"
    "e"
    "S-e"
    "r"
    "S-r"
    "y"
    "S-y"
    "p"
    "S-p"
    "a"
    "s"
    "S-s"
    "d"
    "S-d"
    "f"
    "S-f"
    "g"
    "S-g"
    "h"
    "j"
    "k"
    "c"
    "S-c"
    "A-c"
    "b"
    "/"
    "?"
  ];

  insertMode = [
    "esc"
    "C-w"
    "C-r"
    "C-u"
    "tab"
    "S-tab"
    "C-s"
    "A-d"
    "C-d"
    "C-h"
    "C-j"
    "C-k"
    "C-x"
    "backspace"
    "S-backspace"
    "A-backspace"
    "del"
    "A-del"
    "up"
    "down"
    "left"
    "right"
    "pageup"
    "pagedown"
    "home"
    "end"
    "ret"
  ];

  listToNoOpAttrs = list:
    list
    |> map (name: {
      inherit name;
      value = "no_op";
    })
    |> builtins.listToAttrs;

  normal =
    listToNoOpAttrs normalMode
    // {
      "C-w" = listToNoOpAttrs windowMinorMode;
      "[" = listToNoOpAttrs impairMinorMode;
      "g" = listToNoOpAttrs gotoMinorMode;
      "]" = listToNoOpAttrs impairMinorMode;
      "z" = listToNoOpAttrs viewMinorMode;
      "S-z" = listToNoOpAttrs viewMinorMode;
      "m" = listToNoOpAttrs matchMinorMode;
      "space" = listToNoOpAttrs spaceMinorMode;
    };
  insert = listToNoOpAttrs insertMode;
  select = normal;
in {
  inherit normal insert select;
}
